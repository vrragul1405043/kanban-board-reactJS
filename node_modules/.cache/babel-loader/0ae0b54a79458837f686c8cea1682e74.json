{"ast":null,"code":"var _jsxFileName = \"/Users/ragulravisankar/Desktop/kanban-board-react/src/components/Board/Board.js\";\nimport React, { useState, useEffect, useReducer, createContext } from \"react\";\nimport NewTask from \"./New Task/NewTask\";\nimport BoardLanes from \"./BoardLanes\";\nimport \"./Board.css\";\nimport { Button } from \"react-bootstrap\";\nimport axios from \"axios\";\nexport const BoardContext = createContext({});\nconst stagesData = [{\n  name: \"TODO\",\n  id: 1\n}, {\n  name: \"In Progress\",\n  id: 2\n}, {\n  name: \"Review\",\n  id: 3\n}, {\n  name: \"Completed\",\n  id: 4\n}];\nconst temp = [{\n  id: 1,\n  title: \"Task 1\",\n  description: \"Testing Task 1\",\n  stage: 1\n}, {\n  id: 2,\n  title: \"Task 2\",\n  description: \"Just Test 2\",\n  stage: 1\n}, {\n  id: 3,\n  title: \"Task 3\",\n  description: \"Just Test\",\n  stage: 2\n}, {\n  id: 4,\n  title: \"Task 4\",\n  description: \"Just Test\",\n  stage: 3\n}, {\n  id: 5,\n  title: \"Task 5\",\n  description: \"Just Test\",\n  stage: 4\n}];\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case \"ON_DROP\":\n      const droppedTask = action.payload;\n      const updatedTasks = state.map(task => {\n        if (task.id === droppedTask.id) {\n          return droppedTask;\n        }\n\n        return task;\n      });\n      return updatedTasks;\n\n    case \"LOAD_DATA\":\n      console.log(\"State\");\n      console.log(state);\n      return action.payload;\n\n    case \"ADD_NEW\":\n      return [...state, action.payload];\n\n    case \"ON_DELETE\":\n      return state.filter(task => task.id !== action.payload);\n\n    default:\n      return state;\n  }\n}\n\nfunction Board(props) {\n  // if(props.taskData==null)return (<div>Empty!</div>);\n  const req = {\n    \"id\": \"1\",\n    \"task\": temp\n  };\n  const myJSON = JSON.stringify(req); // taskData = {}\n  // useEffect(() => {\n  //   axios.get('https://zblm46wzp8.execute-api.us-east-1.amazonaws.com/Prod').then(res => {\n  //     console.log(res);\n  //   })\n  //   .then(error => console.log(error));\n  // }, []);\n\n  useEffect(() => {\n    axios({\n      method: \"post\",\n      url: \"https://q28hu8a7z3.execute-api.ap-south-1.amazonaws.com/Prod/board\",\n      data: myJSON,\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(function (response) {\n      console.log(response);\n    }).catch(function (response) {\n      console.log(response);\n    });\n  }, []); // useEffect(() => {\n  // }, [taskState, stages]);\n  // const response = fetch(\"https://zblm46wzp8.execute-api.us-east-1.amazonaws.com/Prod/board\", {\n  //   method: \"POST\",\n  //   headers: {\n  //   'Content-Type' : 'application/json'\n  //   },\n  //   body: myJSON\n  //   })\n  //   if (response.ok){\n  //     console.log(response)\n  //     console.log(\"it worked\")\n  //   }\n  //   else{\n  //     console.log(response)\n  //   }\n  // const [initialTaskState, setInitialTaskState] = useState(props.data.task);\n  // const [taskState, dispatch] = useReducer(reducer, props.data.task);\n\n  const [initialTaskState, setInitialTaskState] = useState(props.data);\n  const [taskState, dispatch] = useReducer(reducer, props.data);\n  const [isNew, setIsNew] = useState(false);\n  const initialData = props.data;\n  const [stages, setStage] = useState(stagesData);\n  useEffect(() => {\n    dispatch({\n      type: \"LOAD_DATA\",\n      payload: taskState\n    });\n  }, [taskState, stages]);\n\n  const onDragStartHandler = (event, taskId, stageId) => {\n    var data = {\n      taskId: taskId,\n      stageId: stageId\n    };\n    event.dataTransfer.setData(\"text/plain\", JSON.stringify(data));\n    event.dataTransfer.effectAllowed = \"move\";\n  };\n\n  const onTaskContainerDragStartHandler = (event, laneId) => {\n    console.log('onTaskContainerDragStartHandler');\n    let fromBox = JSON.stringify({\n      laneId: laneId\n    });\n    event.dataTransfer.setData(\"laneId\", fromBox);\n  };\n\n  const onTaskContainerDragOverHandler = event => {\n    console.log('onTaskContainerDragOverHandler');\n\n    if (event.dataTransfer && event.dataTransfer.types[0] === \"text/plain\") {\n      event.preventDefault();\n    }\n  };\n\n  const onTaskContainerDropHandler = (event, droppedLaneId) => {\n    console.log('onTaskContainerDropHandler');\n  };\n\n  const onDragOverHandler = event => {\n    console.log('onDragOverHandler');\n\n    if (event.dataTransfer && event.dataTransfer.types[0] === \"text/plain\") {\n      event.preventDefault();\n    } // const isSameUser = (initialTaskState, taskState) => initialTaskState.id === taskState.id && initialTaskState.title === taskState.title && initialTaskState.description === taskState.description && initialTaskState.stage === taskState.stage;\n    // setIsNew(isSameUser);\n\n  };\n\n  const onDropHandler = (event, droppedStageId) => {\n    console.log('onDropHandler');\n    console.log(event);\n    console.log(droppedStageId);\n    let droppedData = event.dataTransfer.getData(\"text/plain\");\n    droppedData = JSON.parse(droppedData);\n    console.log(droppedData);\n    const filterTask = taskState.filter(x => x.id === droppedData.taskId);\n    filterTask[0].stage = droppedStageId;\n    dispatch({\n      type: \"ON_DROP\",\n      payload: filterTask[0]\n    }); // const isSameUser = (initialTaskState, taskState) => initialTaskState.id === taskState.id && initialTaskState.title === taskState.title && initialTaskState.description === taskState.stage && initialTaskState.stage === taskState.stage;\n    // setIsNew(isSameUser);\n  };\n\n  const onAddingNewTask = dataFromChild => {\n    dataFromChild.stage = 1;\n    dataFromChild.id = taskState.length + 1;\n    dispatch({\n      type: \"ADD_NEW\",\n      payload: dataFromChild\n    }); // const isSameUser = (initialTaskState, taskState) => initialTaskState.id === taskState.id && initialTaskState.title === taskState.title && initialTaskState.description === taskState.stage && initialTaskState.stage === taskState.stage;\n    // setIsNew(isSameUser);\n  };\n\n  const onUpdatingTask = dataFromChild => {\n    console.log(dataFromChild);\n    dispatch({\n      type: \"ON_DROP\",\n      payload: dataFromChild\n    }); // const isSameUser = (initialTaskState, taskState) => initialTaskState.id === taskState.id && initialTaskState.title === taskState.title && initialTaskState.description === taskState.stage && initialTaskState.stage === taskState.stage;\n    // setIsNew(isSameUser);\n  };\n\n  const onDeletingTask = taskId => {\n    dispatch({\n      type: \"ON_DELETE\",\n      payload: taskId\n    });\n  };\n\n  const onSubmitTask = tasks => {\n    // tasks.task = taskState\n    // const response = fetch(\"https://zblm46wzp8.execute-api.us-east-1.amazonaws.com/Prod/board\", {\n    //   method: \"POST\",\n    //   headers: {\n    //   'Content-Type' : 'application/json'\n    //   },\n    //   body: JSON.stringify(tasks)\n    //   })\n    //   console.log(response);\n    console.log(taskState);\n  };\n\n  const ContextData = {\n    taskState,\n    onDragStartHandler,\n    onDragOverHandler,\n    onDropHandler,\n    onUpdatingTask,\n    onDeletingTask,\n    onTaskContainerDragStartHandler,\n    onTaskContainerDropHandler,\n    onTaskContainerDragOverHandler,\n    onSubmitTask\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid pt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(NewTask, {\n    addNewTask: onAddingNewTask,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    className: \"btn-custom\",\n    onClick: () => onSubmitTask(initialData),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 11\n    }\n  }, \"Submit\"))), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(BoardContext.Provider, {\n    value: ContextData,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(BoardLanes, {\n    stages: stages,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 17\n    }\n  })))));\n}\n\nexport default Board;","map":{"version":3,"sources":["/Users/ragulravisankar/Desktop/kanban-board-react/src/components/Board/Board.js"],"names":["React","useState","useEffect","useReducer","createContext","NewTask","BoardLanes","Button","axios","BoardContext","stagesData","name","id","temp","title","description","stage","reducer","state","action","type","droppedTask","payload","updatedTasks","map","task","console","log","filter","Board","props","req","myJSON","JSON","stringify","method","url","data","headers","then","response","catch","initialTaskState","setInitialTaskState","taskState","dispatch","isNew","setIsNew","initialData","stages","setStage","onDragStartHandler","event","taskId","stageId","dataTransfer","setData","effectAllowed","onTaskContainerDragStartHandler","laneId","fromBox","onTaskContainerDragOverHandler","types","preventDefault","onTaskContainerDropHandler","droppedLaneId","onDragOverHandler","onDropHandler","droppedStageId","droppedData","getData","parse","filterTask","x","onAddingNewTask","dataFromChild","length","onUpdatingTask","onDeletingTask","onSubmitTask","tasks","ContextData"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useReducer, createContext } from \"react\";\nimport NewTask from \"./New Task/NewTask\";\nimport BoardLanes from \"./BoardLanes\";\nimport \"./Board.css\";\nimport { Button } from \"react-bootstrap\";\nimport axios from \"axios\";\n\n\nexport const BoardContext = createContext({});\n\nconst stagesData = [\n  { name: \"TODO\", id: 1 },\n  { name: \"In Progress\", id: 2 },\n  { name: \"Review\", id: 3 },\n  { name: \"Completed\", id: 4 },\n];\n\n\nconst temp = [\n  {\n    id: 1,\n    title: \"Task 1\",\n    description: \"Testing Task 1\",\n    stage: 1,\n  },\n  {\n    id: 2,\n    title: \"Task 2\",\n    description: \"Just Test 2\",\n    stage: 1,\n  },\n  {\n    id: 3,\n    title: \"Task 3\",\n    description: \"Just Test\",\n    stage: 2,\n  },\n  {\n    id: 4,\n    title: \"Task 4\",\n    description: \"Just Test\",\n    stage: 3,\n  },\n  {\n    id: 5,\n    title: \"Task 5\",\n    description: \"Just Test\",\n    stage: 4,\n  }\n];\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case \"ON_DROP\":\n      const droppedTask = action.payload;\n      const updatedTasks = state.map((task) => {\n        if (task.id === droppedTask.id) {\n          return droppedTask;\n        }\n        return task;\n      });\n      return updatedTasks;\n    case \"LOAD_DATA\":\n      console.log(\"State\")\n      console.log(state)\n      return action.payload;\n    case \"ADD_NEW\":\n      return [...state, action.payload];\n    case \"ON_DELETE\":\n      return state.filter((task) => task.id !== action.payload);\n    default:\n      return state;\n  }\n}\nfunction Board(props) {\n  // if(props.taskData==null)return (<div>Empty!</div>);\n  const req = {\"id\":\"1\",\"task\":temp}\n  const myJSON = JSON.stringify(req);\n  // taskData = {}\n  // useEffect(() => {\n  //   axios.get('https://zblm46wzp8.execute-api.us-east-1.amazonaws.com/Prod').then(res => {\n  //     console.log(res);\n  //   })\n  //   .then(error => console.log(error));\n  // }, []);\n  \n  useEffect(() =>{\n    axios({\n      method: \"post\",\n      url: \"https://q28hu8a7z3.execute-api.ap-south-1.amazonaws.com/Prod/board\",\n      data: myJSON,\n      headers: { \"Content-Type\": \"application/json\"},\n    })\n      .then(function (response) {\n        console.log(response);\n      })\n      .catch(function (response) {\n        console.log(response);\n      });\n  },[]);\n\n  // useEffect(() => {\n    \n  // }, [taskState, stages]);\n\n  // const response = fetch(\"https://zblm46wzp8.execute-api.us-east-1.amazonaws.com/Prod/board\", {\n  //   method: \"POST\",\n  //   headers: {\n  //   'Content-Type' : 'application/json'\n  //   },\n  //   body: myJSON\n  //   })\n  //   if (response.ok){\n  //     console.log(response)\n  //     console.log(\"it worked\")\n  //   }\n  //   else{\n  //     console.log(response)\n  //   }\n\n  // const [initialTaskState, setInitialTaskState] = useState(props.data.task);\n  // const [taskState, dispatch] = useReducer(reducer, props.data.task);\n  const [initialTaskState, setInitialTaskState] = useState(props.data);\n  const [taskState, dispatch] = useReducer(reducer, props.data);\n  const [isNew, setIsNew] = useState(false);\n  const initialData = props.data;\n  const [stages, setStage] = useState(stagesData);\n\n  useEffect(() => {\n    dispatch({ type: \"LOAD_DATA\", payload: taskState });\n  }, [taskState, stages]);\n\n  const onDragStartHandler = (\n    event,\n    taskId,\n    stageId\n  ) => {\n    var data = {\n      taskId: taskId,\n      stageId: stageId,\n    };\n    event.dataTransfer.setData(\"text/plain\", JSON.stringify(data));\n    event.dataTransfer.effectAllowed = \"move\";\n  };\n\n  const onTaskContainerDragStartHandler = (event,laneId) => {\n    console.log('onTaskContainerDragStartHandler')\n    let fromBox = JSON.stringify({ laneId: laneId });\n    event.dataTransfer.setData(\"laneId\", fromBox);\n  };\n  const onTaskContainerDragOverHandler = (event) => {\n    console.log('onTaskContainerDragOverHandler')\n    if (event.dataTransfer && event.dataTransfer.types[0] === \"text/plain\") {\n      event.preventDefault();\n    }\n  };\n\n  const onTaskContainerDropHandler = (event, droppedLaneId) => {\n    console.log('onTaskContainerDropHandler')\n  };\n  \n\n  const onDragOverHandler = (event) => {\n    console.log('onDragOverHandler')\n    if (event.dataTransfer && event.dataTransfer.types[0] === \"text/plain\") {\n      event.preventDefault();\n    }\n    // const isSameUser = (initialTaskState, taskState) => initialTaskState.id === taskState.id && initialTaskState.title === taskState.title && initialTaskState.description === taskState.description && initialTaskState.stage === taskState.stage;\n    // setIsNew(isSameUser);\n  };\n\n  const onDropHandler = (event, droppedStageId) => {\n    console.log('onDropHandler')\n    console.log(event);\n    console.log(droppedStageId)\n    let droppedData = event.dataTransfer.getData(\"text/plain\");\n    droppedData = JSON.parse(droppedData);\n    console.log(droppedData)\n    const filterTask = taskState.filter((x) => x.id === droppedData.taskId);\n    filterTask[0].stage = droppedStageId;\n    dispatch({ type: \"ON_DROP\", payload: filterTask[0] });\n    // const isSameUser = (initialTaskState, taskState) => initialTaskState.id === taskState.id && initialTaskState.title === taskState.title && initialTaskState.description === taskState.stage && initialTaskState.stage === taskState.stage;\n    // setIsNew(isSameUser);\n  };\n\n  const onAddingNewTask = (dataFromChild) => {\n    dataFromChild.stage = 1;\n    dataFromChild.id = taskState.length + 1;\n    dispatch({ type: \"ADD_NEW\", payload: dataFromChild });\n    // const isSameUser = (initialTaskState, taskState) => initialTaskState.id === taskState.id && initialTaskState.title === taskState.title && initialTaskState.description === taskState.stage && initialTaskState.stage === taskState.stage;\n    // setIsNew(isSameUser);\n  };\n\n  const onUpdatingTask = (dataFromChild) => {\n    console.log(dataFromChild)\n    dispatch({ type: \"ON_DROP\", payload: dataFromChild });\n    // const isSameUser = (initialTaskState, taskState) => initialTaskState.id === taskState.id && initialTaskState.title === taskState.title && initialTaskState.description === taskState.stage && initialTaskState.stage === taskState.stage;\n    // setIsNew(isSameUser);\n  };\n\n  const onDeletingTask = (taskId) => {\n    dispatch({ type: \"ON_DELETE\", payload: taskId });\n  };\n\n  const onSubmitTask = (tasks) =>{\n    // tasks.task = taskState\n    // const response = fetch(\"https://zblm46wzp8.execute-api.us-east-1.amazonaws.com/Prod/board\", {\n    //   method: \"POST\",\n    //   headers: {\n    //   'Content-Type' : 'application/json'\n    //   },\n    //   body: JSON.stringify(tasks)\n    //   })\n    //   console.log(response);\n    console.log(taskState)\n  };\n\n  const ContextData = {\n    taskState,\n    onDragStartHandler,\n    onDragOverHandler,\n    onDropHandler,\n    onUpdatingTask,\n    onDeletingTask,\n    onTaskContainerDragStartHandler,\n    onTaskContainerDropHandler,\n    onTaskContainerDragOverHandler,\n    onSubmitTask\n  };\n\n  return (\n    <div className=\"container-fluid pt-3\">\n      <div className=\"row\">\n        <div className=\"col-12\">\n          <NewTask addNewTask={onAddingNewTask}/>\n          <Button className=\"btn-custom\" onClick={()=>onSubmitTask(initialData)}>\n            Submit\n          </Button>\n        </div>\n      </div>\n      <hr />\n      <div className=\"row\">\n        <div className=\"col-12\">\n            <BoardContext.Provider value={ContextData}>\n                <BoardLanes stages={stages}></BoardLanes>\n            </BoardContext.Provider>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Board;\n"]},"metadata":{},"sourceType":"module"}